---
layout: single
title:  "1.JSP - Tag"
category: tool
tag: [JSP, Tag]
---
# JSP Tag

## 목차
1. [Script Tag (스크립트 태그)](#1-script-tag-스크립트-태그)
   - [개념](#개념)
   - [스크립틀릿 (Scriptlet)](#스크립틀릿-scriptlet)
   - [표현식 (Expression)](#표현식-expression)
   - [선언부 (Declaration)](#선언부-declaration)
   - [주석 (Comment)](#주석-comment)
   - [Script Tag 사용 예제](#script-tag-사용-예제)
   - [주의사항](#주의사항)

2. [Directive Tag (디렉티브 태그)](#2-directive-tag-디렉티브-태그)
   - [개념](#개념-1)
   - [Page Directive](#page-directive)
   - [Include Directive](#include-directive)
   - [Taglib Directive](#taglib-directive)
   - [Directive Tag 사용 예제](#directive-tag-사용-예제)
   - [속성 상세 설명](#속성-상세-설명)

3. [Action Tag (액션 태그)](#3-action-tag-액션-태그)
   - [개념](#개념-2)
   - [Standard Action Tags](#standard-action-tags)
   - [jsp:include](#jspinclude)
   - [jsp:forward](#jspforward)
   - [jsp:param](#jspparam)
   - [jsp:useBean](#jspusebean)
   - [jsp:setProperty](#jspsetproperty)
   - [jsp:getProperty](#jspgetproperty)
   - [jsp:plugin](#jspplugin)
   - [jsp:element](#jspelement)
   - [jsp:attribute](#jspattribute)
   - [jsp:body](#jspbody)
   - [jsp:text](#jsptext)
   - [Action Tag 사용 예제](#action-tag-사용-예제)

4. [태그별 비교 및 활용](#4-태그별-비교-및-활용)
   - [Script vs Directive vs Action](#script-vs-directive-vs-action)
   - [모범 사례](#모범-사례)
   - [성능 고려사항](#성능-고려사항)

5. [실무 활용 예제](#5-실무-활용-예제)
   - [통합 예제](#통합-예제)
   - [일반적인 패턴](#일반적인-패턴)

---

## 1. Script Tag (스크립트 태그)

### 개념
Script Tag는 JSP 페이지 내에서 Java 코드를 직접 작성할 수 있게 해주는 태그들입니다. HTML 내에 서버 사이드 로직을 삽입하여 동적인 콘텐츠를 생성할 수 있습니다.

### 스크립틀릿 (Scriptlet)
**구문**: `<% Java 코드 %>`

JSP 페이지에서 Java 코드를 실행하기 위해 사용합니다. `_jspService()` 메소드 내에 포함되어 매 요청마다 실행됩니다.

```jsp
<%
    String userName = "홍길동";
    int userAge = 25;
    
    if (userAge >= 20) {
        out.println("성인입니다.");
    } else {
        out.println("미성년자입니다.");
    }
    
    // 반복문 사용
    for (int i = 1; i <= 5; i++) {
        out.println("번호: " + i + "<br>");
    }
%>
```

### 표현식 (Expression)
**구문**: `<%= Java 표현식 %>`

Java 표현식의 결과값을 HTML 출력 스트림에 직접 출력합니다. `out.print()`와 동일한 효과를 가집니다.

```jsp
<h1>사용자 이름: <%= userName %></h1>
<p>현재 시간: <%= new java.util.Date() %></p>
<p>계산 결과: <%= 10 + 20 %></p>
<p>문자열 길이: <%= "Hello World".length() %></p>
```

### 선언부 (Declaration)
**구문**: `<%! 멤버 변수 또는 메소드 선언 %>`

JSP 클래스의 멤버 변수나 메소드를 선언합니다. 클래스 레벨에서 선언되어 모든 요청에서 공유됩니다.

```jsp
<%!
    // 멤버 변수 선언
    private int visitCount = 0;
    private String siteName = "My Website";
    
    // 메소드 선언
    public String getCurrentTime() {
        return new java.util.Date().toString();
    }
    
    public int getNextVisitCount() {
        return ++visitCount;
    }
    
    // JSP 생명주기 메소드 오버라이드
    public void jspInit() {
        System.out.println("JSP 초기화: " + siteName);
    }
    
    public void jspDestroy() {
        System.out.println("JSP 종료");
    }
%>
```

### 주석 (Comment)
**구문**: `<%-- 주석 내용 --%>`

JSP 주석은 클라이언트에게 전송되지 않으며, 번역 과정에서 제거됩니다.

```jsp
<%-- 이것은 JSP 주석입니다. 클라이언트에게 보이지 않습니다. --%>
<!-- 이것은 HTML 주석입니다. 클라이언트에게 보입니다. -->

<%--
    여러 줄 JSP 주석
    개발자 메모나 임시로 코드를 비활성화할 때 사용
--%>
```

### Script Tag 사용 예제

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%!
    // 선언부: 방문자 수 카운터
    private int visitorCount = 0;
    
    public synchronized int getVisitorCount() {
        return ++visitorCount;
    }
%>

<!DOCTYPE html>
<html>
<head>
    <title>Script Tag 예제</title>
</head>
<body>
    <%
        // 스크립틀릿: 현재 방문자 번호
        int currentVisitor = getVisitorCount();
        String greeting;
        
        if (currentVisitor == 1) {
            greeting = "첫 번째 방문자입니다!";
        } else {
            greeting = currentVisitor + "번째 방문자입니다.";
        }
    %>
    
    <h1><%= greeting %></h1>
    <p>현재 시간: <%= new java.util.Date() %></p>
    
    <%-- 구구단 출력 --%>
    <h2>구구단 3단</h2>
    <%
        for (int i = 1; i <= 9; i++) {
            out.println("3 × " + i + " = " + (3 * i) + "<br>");
        }
    %>
</body>
</html>
```

### 주의사항
- **스레드 안전성**: 선언부에서 선언된 변수는 모든 요청에서 공유되므로 동기화 필요
- **가독성**: 과도한 스크립틀릿 사용은 코드 가독성을 떨어뜨림
- **유지보수**: 비즈니스 로직은 별도 클래스로 분리하는 것이 바람직
- **디버깅**: 스크립틀릿 내 오류는 디버깅이 어려울 수 있음

---

## 2. Directive Tag (디렉티브 태그)

### 개념
Directive Tag는 JSP 페이지의 전체적인 구조나 속성을 설정하는 태그입니다. 페이지 번역 시에 JSP 엔진에게 특별한 정보를 제공하며, 실제 출력에는 포함되지 않습니다.

**기본 구문**: `<%@ directive attribute="value" %>`

### Page Directive
JSP 페이지의 기본 속성을 설정합니다.

**구문**: `<%@ page 속성="값" %>`

```jsp
<%@ page 
    language="java"
    contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"
    import="java.util.*,java.text.*"
    session="true"
    buffer="8kb"
    autoFlush="true"
    isThreadSafe="true"
    info="사용자 관리 페이지"
    errorPage="error.jsp"
    isErrorPage="false"
%>
```

### Include Directive
다른 파일의 내용을 현재 JSP에 포함시킵니다 (정적 포함).

**구문**: `<%@ include file="파일경로" %>`

```jsp
<%-- 헤더 파일 포함 --%>
<%@ include file="header.jsp" %>

<%-- CSS 파일 포함 --%>
<%@ include file="/css/common.css" %>

<%-- 공통 변수 설정 파일 포함 --%>
<%@ include file="config.jsp" %>
```

### Taglib Directive
커스텀 태그 라이브러리나 JSTL을 사용하기 위해 선언합니다.

**구문**: `<%@ taglib prefix="접두어" uri="라이브러리URI" %>`

```jsp
<%-- JSTL Core 라이브러리 --%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<%-- JSTL Formatting 라이브러리 --%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<%-- 커스텀 태그 라이브러리 --%>
<%@ taglib prefix="my" uri="/WEB-INF/tlds/mytags.tld" %>
```

### Directive Tag 사용 예제

**main.jsp**
```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" 
         import="java.util.*, java.text.SimpleDateFormat"
         session="true" buffer="16kb" %>
<%@ include file="config.jsp" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!DOCTYPE html>
<html>
<head>
    <title><%= APP_NAME %></title>
</head>
<body>
    <%@ include file="header.jsp" %>
    
    <main>
        <h1>환영합니다!</h1>
        <p>현재 버전: <%= APP_VERSION %></p>
        
        <c:set var="currentDate" value="<%= new Date() %>" />
        <p>현재 시간: <fmt:formatDate value="${currentDate}" pattern="yyyy-MM-dd HH:mm:ss" /></p>
    </main>
    
    <%@ include file="footer.jsp" %>
</body>
</html>
```

**config.jsp**
```jsp
<%!
    public static final String APP_NAME = "My Web Application";
    public static final String APP_VERSION = "1.0.0";
    public static final int MAX_USERS = 1000;
%>
```

**header.jsp**
```jsp
<header>
    <nav>
        <ul>
            <li><a href="/">홈</a></li>
            <li><a href="/about">소개</a></li>
            <li><a href="/contact">연락처</a></li>
        </ul>
    </nav>
</header>
```

### 속성 상세 설명

#### Page Directive 주요 속성
- **language**: 사용할 프로그래밍 언어 (기본값: java)
- **contentType**: MIME 타입과 문자 인코딩 설정
- **pageEncoding**: JSP 파일의 문자 인코딩
- **import**: 사용할 Java 패키지나 클래스 import
- **session**: 세션 사용 여부 (기본값: true)
- **buffer**: 출력 버퍼 크기 설정
- **autoFlush**: 버퍼가 가득 찰 때 자동 flush 여부
- **isThreadSafe**: 스레드 안전성 여부
- **info**: 페이지에 대한 설명
- **errorPage**: 오류 발생 시 이동할 페이지
- **isErrorPage**: 현재 페이지가 오류 처리 페이지인지 여부

---

## 3. Action Tag (액션 태그)

### 개념
Action Tag는 특정 동작을 수행하는 태그로, 서버 측에서 실행되어 동적인 기능을 제공합니다. XML 형태의 태그로 작성되며, 자바 코드 없이도 복잡한 작업을 수행할 수 있습니다.

**기본 구문**: `<jsp:actionName attribute="value" />`

### Standard Action Tags

#### jsp:include
다른 리소스의 내용을 런타임에 포함시킵니다 (동적 포함).

**Elements**: `<jsp:include>`, `<jsp:param>`  
**Attributes**: `page`, `flush`

```jsp
<%-- 기본 사용법 --%>
<jsp:include page="menu.jsp" />
<jsp:include page="header.jsp" flush="true" />

<%-- 매개변수와 함께 사용 --%>
<jsp:include page="userInfo.jsp">
    <jsp:param name="userId" value="<%= session.getAttribute("userId") %>" />
    <jsp:param name="userType" value="premium" />
</jsp:include>

<%-- 조건부 포함 --%>
<%
    String userRole = (String) session.getAttribute("role");
    if ("admin".equals(userRole)) {
%>
    <jsp:include page="adminPanel.jsp" />
<%
    }
%>
```

#### jsp:forward
다른 페이지로 요청을 전달합니다 (서버 내부 전달).

**Elements**: `<jsp:forward>`, `<jsp:param>`  
**Attributes**: `page`

```jsp
<%-- 단순 전달 --%>
<jsp:forward page="welcome.jsp" />

<%-- 매개변수와 함께 전달 --%>
<jsp:forward page="processLogin.jsp">
    <jsp:param name="timestamp" value="<%= System.currentTimeMillis() %>" />
    <jsp:param name="clientIP" value="<%= request.getRemoteAddr() %>" />
</jsp:forward>

<%-- 조건부 전달 --%>
<%
    String action = request.getParameter("action");
    if ("login".equals(action)) {
%>
    <jsp:forward page="login.jsp" />
<%
    } else if ("register".equals(action)) {
%>
    <jsp:forward page="register.jsp" />
<%
    }
%>
```

#### jsp:param
jsp:include나 jsp:forward와 함께 사용하여 매개변수를 전달합니다.

**Elements**: `<jsp:param>`  
**Attributes**: `name`, `value`

```jsp
<jsp:include page="displayUser.jsp">
    <jsp:param name="userName" value="김철수" />
    <jsp:param name="userAge" value="30" />
    <jsp:param name="userEmail" value="kim@example.com" />
</jsp:include>

<%-- 동적 값 전달 --%>
<jsp:forward page="result.jsp">
    <jsp:param name="result" value="<%= calculation.getResult() %>" />
    <jsp:param name="timestamp" value="<%= System.currentTimeMillis() %>" />
</jsp:forward>
```

#### jsp:useBean
JavaBean 객체를 생성하고 관리합니다.

**Elements**: `<jsp:useBean>`  
**Attributes**: `id`, `class`, `scope`, `type`, `beanName`

```jsp
<%-- 기본 Bean 생성 --%>
<jsp:useBean id="user" class="com.example.User" scope="session" />

<%-- Bean 생성 시 초기화 --%>
<jsp:useBean id="product" class="com.example.Product" scope="request">
    <jsp:setProperty name="product" property="name" value="노트북" />
    <jsp:setProperty name="product" property="price" value="1200000" />
</jsp:useBean>

<%-- 다양한 scope 사용 --%>
<jsp:useBean id="config" class="com.example.Config" scope="application" />
<jsp:useBean id="cart" class="com.example.ShoppingCart" scope="session" />
<jsp:useBean id="item" class="com.example.Item" scope="page" />

<%-- type 속성 사용 (인터페이스나 부모 클래스) --%>
<jsp:useBean id="service" type="com.example.UserService" 
             class="com.example.UserServiceImpl" scope="application" />
```

#### jsp:setProperty
JavaBean의 속성값을 설정합니다.

**Elements**: `<jsp:setProperty>`  
**Attributes**: `name`, `property`, `value`, `param`

```jsp
<%-- 특정 속성 직접 설정 --%>
<jsp:setProperty name="user" property="name" value="홍길동" />
<jsp:setProperty name="user" property="age" value="25" />

<%-- 요청 매개변수로부터 자동 설정 (모든 속성) --%>
<jsp:setProperty name="user" property="*" />

<%-- 요청 매개변수 이름과 속성 이름이 다를 때 --%>
<jsp:setProperty name="user" property="name" param="fullName" />
<jsp:setProperty name="user" property="email" param="userEmail" />

<%-- 표현식 사용 --%>
<jsp:setProperty name="user" property="registDate" 
                 value="<%= new java.util.Date() %>" />
<jsp:setProperty name="user" property="sessionId" 
                 value="<%= session.getId() %>" />
```

#### jsp:getProperty
JavaBean의 속성값을 출력합니다.

**Elements**: `<jsp:getProperty>`  
**Attributes**: `name`, `property`

```jsp
<h2>사용자 정보</h2>
<p>이름: <jsp:getProperty name="user" property="name" /></p>
<p>나이: <jsp:getProperty name="user" property="age" /></p>
<p>이메일: <jsp:getProperty name="user" property="email" /></p>

<%-- 테이블 형태로 출력 --%>
<table>
    <tr>
        <td>사용자 ID:</td>
        <td><jsp:getProperty name="user" property="id" /></td>
    </tr>
    <tr>
        <td>등록일:</td>
        <td><jsp:getProperty name="user" property="registDate" /></td>
    </tr>
</table>
```

#### jsp:plugin
Java 애플릿이나 Bean을 브라우저에서 실행하기 위해 사용합니다.

**Elements**: `<jsp:plugin>`, `<jsp:params>`, `<jsp:param>`, `<jsp:fallback>`  
**Attributes**: `type`, `code`, `codebase`, `width`, `height`, `archive`, `name`, `align`, `hspace`, `vspace`

```jsp
<%-- Java 애플릿 실행 --%>
<jsp:plugin type="applet" code="Calculator.class" 
            width="300" height="200" archive="calculator.jar">
    <jsp:params>
        <jsp:param name="bgcolor" value="white" />
        <jsp:param name="precision" value="2" />
    </jsp:params>
    <jsp:fallback>
        <p>Java 애플릿을 지원하지 않는 브라우저입니다.</p>
        <p><a href="calculator.html">HTML 버전 계산기 사용하기</a></p>
    </jsp:fallback>
</jsp:plugin>

<%-- Bean 실행 --%>
<jsp:plugin type="bean" code="com.example.ChartBean" 
            width="400" height="300">
    <jsp:params>
        <jsp:param name="dataSource" value="sales.xml" />
        <jsp:param name="chartType" value="pie" />
    </jsp:params>
</jsp:plugin>
```

#### jsp:element
동적으로 XML 요소를 생성합니다.

**Elements**: `<jsp:element>`, `<jsp:attribute>`, `<jsp:body>`  
**Attributes**: `name`

```jsp
<%-- 동적 HTML 태그 생성 --%>
<jsp:element name="<%= tagName %>">
    <jsp:attribute name="class">dynamic-content</jsp:attribute>
    <jsp:attribute name="id"><%= elementId %></jsp:attribute>
    <jsp:body>
        동적으로 생성된 컨텐츠입니다.
    </jsp:body>
</jsp:element>

<%-- 조건부 태그 생성 --%>
<%
    String headerLevel = request.getParameter("level");
    if (headerLevel == null) headerLevel = "h1";
%>
<jsp:element name="<%= headerLevel %>">
    <jsp:attribute name="class">page-title</jsp:attribute>
    <jsp:body>
        <%= pageTitle %>
    </jsp:body>
</jsp:element>
```

#### jsp:attribute
jsp:element와 함께 사용하여 속성을 동적으로 설정합니다.

**Elements**: `<jsp:attribute>`  
**Attributes**: `name`, `trim`

```jsp
<jsp:element name="div">
    <jsp:attribute name="class">
        container <%= isActive ? "active" : "inactive" %>
    </jsp:attribute>
    <jsp:attribute name="data-id"><%= itemId %></jsp:attribute>
    <jsp:attribute name="style" trim="true">
        width: <%= width %>px;
        height: <%= height %>px;
        background-color: <%= bgColor %>;
    </jsp:attribute>
    <jsp:body>
        컨텐츠 내용
    </jsp:body>
</jsp:element>
```

#### jsp:body
jsp:element의 본문 내용을 정의합니다.

**Elements**: `<jsp:body>`  
**Attributes**: 없음

```jsp
<jsp:element name="article">
    <jsp:attribute name="class">blog-post</jsp:attribute>
    <jsp:body>
        <h2><%= post.getTitle() %></h2>
        <p class="meta">작성일: <%= post.getDate() %></p>
        <div class="content">
            <%= post.getContent() %>
        </div>
        <jsp:include page="comments.jsp">
            <jsp:param name="postId" value="<%= post.getId() %>" />
        </jsp:include>
    </jsp:body>
</jsp:element>
```

#### jsp:text
템플릿 텍스트를 명시적으로 정의합니다.

**Elements**: `<jsp:text>`  
**Attributes**: 없음

```jsp
<%-- XML 문서에서 텍스트 명시적 정의 --%>
<jsp:text>
    이것은 순수한 텍스트 내용입니다.
    JSP 처리 없이 그대로 출력됩니다.
</jsp:text>

<%-- 조건부 텍스트 출력 --%>
<% if (showWelcome) { %>
    <jsp:text>환영합니다! 회원님</jsp:text>
<% } else { %>
    <jsp:text>로그인이 필요합니다.</jsp:text>
<% } %>
```

#### jsp:output
JSP 페이지의 출력 속성을 제어합니다.

**Elements**: `<jsp:output>`  
**Attributes**: `omit-xml-declaration`, `doctype-root-element`, `doctype-public`, `doctype-system`

```jsp
<%-- XML 선언 생략 및 DOCTYPE 설정 --%>
<jsp:output 
    omit-xml-declaration="false"
    doctype-root-element="html"
    doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
    doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" />

<%-- HTML5 DOCTYPE 설정 --%>
<jsp:output 
    omit-xml-declaration="true"
    doctype-root-element="html" />
```

### Action Tag 사용 예제

**사용자 관리 시스템 예제**

**userForm.jsp** (사용자 입력 폼)
```jsp
<%@ page contentType="text/html; charset=UTF-8" %>
<!DOCTYPE html>
<html>
<head>
    <title>사용자 등록</title>
</head>
<body>
    <h1>사용자 등록</h1>
    <form action="processUser.jsp" method="post">
        <p>이름: <input type="text" name="name" required></p>
        <p>나이: <input type="number" name="age" required></p>
        <p>이메일: <input type="email" name="email" required></p>
        <p>부서: 
            <select name="department">
                <option value="개발">개발</option>
                <option value="디자인">디자인</option>
                <option value="마케팅">마케팅</option>
            </select>
        </p>
        <p><input type="submit" value="등록"></p>
    </form>
</body>
</html>
```

**processUser.jsp** (사용자 데이터 처리)
```jsp
<%@ page contentType="text/html; charset=UTF-8" %>

<%-- User Bean 생성 --%>
<jsp:useBean id="user" class="com.example.User" scope="session" />

<%-- 폼 데이터를 Bean에 자동 매핑 --%>
<jsp:setProperty name="user" property="*" />

<%-- 추가 데이터 설정 --%>
<jsp:setProperty name="user" property="registDate" 
                 value="<%= new java.util.Date() %>" />

<%
    // 유효성 검사
    if (user.getName() == null || user.getName().trim().isEmpty()) {
%>
    <jsp:forward page="userForm.jsp">
        <jsp:param name="error" value="이름을 입력해주세요." />
    </jsp:forward>
<%
    } else {
        // 성공적으로 처리된 경우 결과 페이지로 이동
%>
    <jsp:forward page="userResult.jsp" />
<%
    }
%>
```

**userResult.jsp** (결과 표시)
```jsp
<%@ page contentType="text/html; charset=UTF-8" %>
<jsp:useBean id="user" class="com.example.User" scope="session" />

<!DOCTYPE html>
<html>
<head>
    <title>등록 완료</title>
</head>
<body>
    <h1>등록이 완료되었습니다!</h1>
    
    <%-- 공통 헤더 포함 --%>
    <jsp:include page="header.jsp" />
    
    <div class="user-info">
        <h2>등록된 사용자 정보</h2>
        <table>
            <tr>
                <td>이름:</td>
                <td><jsp:getProperty name="user" property="name" /></td>
            </tr>
            <tr>
                <td>나이:</td>
                <td><jsp:getProperty name="user" property="age" /></td>
            </tr>
            <tr>
                <td>이메일:</td>
                <td><jsp:getProperty name="user" property="email" /></td>
            </tr>
            <tr>
                <td>부서:</td>
                <td><jsp:getProperty name="user" property="department" /></td>
            </tr>
            <tr>
                <td>등록일:</td>
                <td><jsp:getProperty name="user" property="registDate" /></td>
            </tr>
        </table>
    </div>
    
    <p><a href="userForm.jsp">새 사용자 등록</a></p>
    
    <%-- 공통 푸터 포함 --%>
    <jsp:include page="footer.jsp" />
</body>
</html>
```

---

## 4. 태그별 비교 및 활용

### Script vs Directive vs Action

| 구분 | Script Tag | Directive Tag | Action Tag |
|------|------------|---------------|------------|
| **목적** | Java 코드 실행 | 페이지 설정 | 특정 동작 수행 |
| **실행 시점** | 런타임 | 번역 시점 | 런타임 |
| **구문** | `<% %>`, `<%= %>`, `<%! %>` | `<%@ %>` | `<jsp:action>` |
| **코드 위치** | _jspService() 메소드 내 | 클래스 레벨 | 메소드 호출 |
| **재사용성** | 낮음 | 높음 | 높음 |
| **가독성** | 낮음 | 보통 | 높음 |
| **유지보수성** | 어려움 | 쉬움 | 쉬움 |

### 모범 사례

#### Script Tag 사용 시
```jsp
<%-- 좋은 예: 간단한 로직 --%>
<%
    String message = (String) session.getAttribute("message");
    if (message != null) {
        out.println("<div class='alert'>" + message + "</div>");
        session.removeAttribute("message");
    }
%>

<%-- 나쁜 예: 복잡한 비즈니스 로직 --%>
<%
    // 100줄 이상의 복잡한 코드는 별도 클래스로 분리해야 함
%>
```

#### Directive Tag 사용 시
```jsp
<%-- 좋은 예: 페이지 상단에 모든 directive 배치 --%>
<%@ page contentType="text/html; charset=UTF-8" %>
<%@ include file="config.jsp" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<%-- 나쁜 예: 페이지 중간에 directive 사용 --%>
<html>
<body>
    <%@ page import="java.util.*" %>  <!-- 잘못된 위치 -->
</body>
</html>
```

#### Action Tag 사용 시
```jsp
<%-- 좋은 예: 명확한 목적의 Action Tag 사용 --%>
<jsp:useBean id="user" class="com.example.User" scope="session" />
<jsp:setProperty name="user" property="*" />

<%-- 좋은 예: 매개변수와 함께 include --%>
<jsp:include page="userProfile.jsp">
    <jsp:param name="userId" value="${user.id}" />
</jsp:include>
```

### 성능 고려사항

1. **Include Directive vs Include Action**
   - `<%@ include %>`: 번역 시점에 포함 (정적) - 빠름
   - `<jsp:include>`: 런타임에 포함 (동적) - 유연함

2. **Expression vs getProperty**
   - `<%= %>`: 직접적인 Java 코드 - 빠름
   - `<jsp:getProperty>`: 리플렉션 사용 - 약간 느림

3. **Script vs Action**
   - Script Tag: 컴파일된 Java 코드 - 빠름
   - Action Tag: 태그 처리 오버헤드 - 약간 느림

---

## 5. 실무 활용 예제

### 통합 예제
**실제 웹 애플리케이션에서 세 가지 태그를 모두 활용한 예제**

**productList.jsp**
```jsp
<%-- Directive Tags --%>
<%@ page language="java" contentType="text/html; charset=UTF-8" 
         import="java.util.*, com.example.model.*" 
         session="true" %>
<%@ include file="/WEB-INF/includes/config.jsp" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<%-- Script Tag: 선언부 --%>
<%!
    private static final int ITEMS_PER_PAGE = 10;
    
    public String formatCurrency(int amount) {
        return String.format("%,d원", amount);
    }
%>

<!DOCTYPE html>
<html>
<head>
    <title><%= SITE_NAME %> - 상품 목록</title>
    <link rel="stylesheet" type="text/css" href="/css/product.css">
</head>
<body>
    <%-- Action Tag: 헤더 포함 --%>
    <jsp:include page="/WEB-INF/includes/header.jsp" />
    
    <main class="product-list">
        <h1>상품 목록</h1>
        
        <%-- Action Tag: 상품 데이터를 위한 Bean --%>
        <jsp:useBean id="productService" class="com.example.service.ProductService" />
        
        <%-- Script Tag: 스크립틀릿 --%>
        <%
            String category = request.getParameter("category");
            String pageParam = request.getParameter("page");
            int currentPage = (pageParam != null) ? Integer.parseInt(pageParam) : 1;
            
            List<Product> products = productService.getProducts(category, currentPage, ITEMS_PER_PAGE);
            int totalCount = productService.getTotalCount(category);
            int totalPages = (int) Math.ceil((double) totalCount / ITEMS_PER_PAGE);
        %>
        
        <%-- 카테고리 필터 --%>
        <div class="category-filter">
            <a href="?category=all" class="<%= "all".equals(category) ? "active" : "" %>">전체</a>
            <a href="?category=electronics" class="<%= "electronics".equals(category) ? "active" : "" %>">전자제품</a>
            <a href="?category=books" class="<%= "books".equals(category) ? "active" : "" %>">도서</a>
            <a href="?category=clothing" class="<%= "clothing".equals(category) ? "active" : "" %>">의류</a>
        </div>
        
        <%-- 상품 목록 출력 --%>
        <div class="products-grid">
            <%
                if (products != null && !products.isEmpty()) {
                    for (Product product : products) {
            %>
                <div class="product-card">
                    <img src="<%= product.getImageUrl() %>" alt="<%= product.getName() %>">
                    <h3><%= product.getName() %></h3>
                    <p class="price"><%= formatCurrency(product.getPrice()) %></p>
                    <p class="description"><%= product.getDescription() %></p>
                    
                    <%-- Action Tag: 상품 상세 페이지로 이동 --%>
                    <form action="productDetail.jsp" method="get">
                        <input type="hidden" name="productId" value="<%= product.getId() %>">
                        <button type="submit" class="btn-detail">상세보기</button>
                    </form>
                </div>
            <%
                    }
                } else {
            %>
                <div class="no-products">
                    <p>상품이 없습니다.</p>
                </div>
            <%
                }
            %>
        </div>
        
        <%-- 페이지네이션 --%>
        <div class="pagination">
            <%
                if (currentPage > 1) {
            %>
                <a href="?category=<%= category %>&page=<%= currentPage - 1 %>" class="prev">이전</a>
            <%
                }
                
                for (int i = Math.max(1, currentPage - 2); i <= Math.min(totalPages, currentPage + 2); i++) {
                    if (i == currentPage) {
            %>
                <span class="current"><%= i %></span>
            <%
                    } else {
            %>
                <a href="?category=<%= category %>&page=<%= i %>"><%= i %></a>
            <%
                    }
                }
                
                if (currentPage < totalPages) {
            %>
                <a href="?category=<%= category %>&page=<%= currentPage + 1 %>" class="next">다음</a>
            <%
                }
            %>
        </div>
        
        <%-- 상품 통계 정보 --%>
        <div class="product-stats">
            <p>
                총 <strong><%= totalCount %></strong>개의 상품 중 
                <strong><%= (currentPage - 1) * ITEMS_PER_PAGE + 1 %></strong> - 
                <strong><%= Math.min(currentPage * ITEMS_PER_PAGE, totalCount) %></strong>번째 상품
            </p>
        </div>
    </main>
    
    <%-- Action Tag: 푸터 포함 --%>
    <jsp:include page="/WEB-INF/includes/footer.jsp">
        <jsp:param name="currentPage" value="products" />
    </jsp:include>
    
    <%-- Script Tag: 페이지 로드 완료 로그 --%>
    <%
        System.out.println("상품 목록 페이지 로드 완료 - 카테고리: " + category + ", 페이지: " + currentPage);
    %>
</body>
</html>
```

**config.jsp** (설정 파일)
```jsp
<%!
    // 사이트 기본 설정
    public static final String SITE_NAME = "쇼핑몰";
    public static final String SITE_VERSION = "2.1.0";
    public static final String ADMIN_EMAIL = "admin@example.com";
    
    // 데이터베이스 설정
    public static final String DB_URL = "jdbc:mysql://localhost:3306/shopping";
    public static final String DB_USER = "shopping_user";
    
    // 페이지 설정
    public static final int DEFAULT_PAGE_SIZE = 20;
    public static final int MAX_PAGE_SIZE = 100;
%>
```

**header.jsp** (공통 헤더)
```jsp
<%@ page contentType="text/html; charset=UTF-8" %>
<%
    String currentUser = (String) session.getAttribute("currentUser");
    boolean isLoggedIn = (currentUser != null);
%>

<header class="site-header">
    <div class="container">
        <div class="logo">
            <a href="/"><%= SITE_NAME %></a>
        </div>
        
        <nav class="main-nav">
            <ul>
                <li><a href="/">홈</a></li>
                <li><a href="/products">상품</a></li>
                <li><a href="/about">회사소개</a></li>
                <li><a href="/contact">연락처</a></li>
            </ul>
        </nav>
        
        <div class="user-menu">
            <% if (isLoggedIn) { %>
                <span>환영합니다, <%= currentUser %>님!</span>
                <a href="/mypage">마이페이지</a>
                <a href="/logout">로그아웃</a>
            <% } else { %>
                <a href="/login">로그인</a>
                <a href="/register">회원가입</a>
            <% } %>
        </div>
    </div>
</header>
```

### 일반적인 패턴

#### 1. MVC 패턴과 JSP 태그 활용
```jsp
<%-- Controller 역할 (스크립틀릿) --%>
<%
    String action = request.getParameter("action");
    String view = "list"; // 기본 뷰
    
    if ("add".equals(action)) {
        view = "add";
    } else if ("edit".equals(action)) {
        view = "edit";
    } else if ("delete".equals(action)) {
        // 삭제 처리 후 목록으로 리다이렉트
%>
        <jsp:forward page="productList.jsp">
            <jsp:param name="message" value="삭제되었습니다." />
        </jsp:forward>
<%
    }
%>

<%-- View 결정 및 렌더링 --%>
<% if ("add".equals(view)) { %>
    <jsp:include page="productAdd.jsp" />
<% } else if ("edit".equals(view)) { %>
    <jsp:include page="productEdit.jsp" />
<% } else { %>
    <jsp:include page="productList.jsp" />
<% } %>
```

#### 2. 폼 처리 패턴
```jsp
<%-- 폼 데이터 수집 및 검증 --%>
<jsp:useBean id="user" class="com.example.model.User" scope="request" />
<jsp:setProperty name="user" property="*" />

<%
    List<String> errors = new ArrayList<>();
    
    if (user.getName() == null || user.getName().trim().isEmpty()) {
        errors.add("이름을 입력해주세요.");
    }
    
    if (user.getEmail() == null || !user.getEmail().contains("@")) {
        errors.add("올바른 이메일을 입력해주세요.");
    }
    
    if (errors.isEmpty()) {
        // 성공 처리
%>
        <jsp:forward page="success.jsp" />
<%
    } else {
        // 오류가 있는 경우 폼으로 돌아가기
        request.setAttribute("errors", errors);
%>
        <jsp:include page="userForm.jsp" />
<%
    }
%>
```

#### 3. 세션 관리 패턴
```jsp
<%-- 로그인 체크 및 권한 확인 --%>
<%
    String userRole = (String) session.getAttribute("userRole");
    if (userRole == null) {
        // 로그인하지 않은 경우
%>
        <jsp:forward page="login.jsp">
            <jsp:param name="returnUrl" value="<%= request.getRequestURI() %>" />
            <jsp:param name="message" value="로그인이 필요합니다." />
        </jsp:forward>
<%
    } else if (!"admin".equals(userRole)) {
        // 관리자가 아닌 경우
%>
        <jsp:forward page="accessDenied.jsp" />
<%
    }
%>

<%-- 관리자 전용 컨텐츠 --%>
<div class="admin-panel">
    <h1>관리자 패널</h1>
    <!-- 관리자 기능들... -->
</div>
```

#### 4. 다국어 지원 패턴
```jsp
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<%-- 언어 설정 --%>
<%
    String lang = request.getParameter("lang");
    if (lang == null) {
        lang = (String) session.getAttribute("language");
    }
    if (lang == null) {
        lang = "ko"; // 기본 언어
    }
    session.setAttribute("language", lang);
%>

<fmt:setLocale value="<%= lang %>" />
<fmt:setBundle basename="messages" />

<h1><fmt:message key="welcome.title" /></h1>
<p><fmt:message key="welcome.message">
    <fmt:param value="${sessionScope.userName}" />
</fmt:message></p>

<%-- 언어 변경 링크 --%>
<div class="language-selector">
    <a href="?lang=ko" class="<%= "ko".equals(lang) ? "active" : "" %>">한국어</a>
    <a href="?lang=en" class="<%= "en".equals(lang) ? "active" : "" %>">English</a>
    <a href="?lang=ja" class="<%= "ja".equals(lang) ? "active" : "" %>">日本語</a>
</div>
```

#### 5. 에러 처리 패턴
```jsp
<%-- 에러 페이지 (error.jsp) --%>
<%@ page isErrorPage="true" %>
<!DOCTYPE html>
<html>
<head>
    <title>오류 발생</title>
</head>
<body>
    <div class="error-container">
        <h1>죄송합니다. 오류가 발생했습니다.</h1>
        
        <%
            String errorType = exception.getClass().getSimpleName();
            String errorMessage = exception.getMessage();
        %>
        
        <% if ("NullPointerException".equals(errorType)) { %>
            <p>시스템 내부 오류가 발생했습니다. 잠시 후 다시 시도해주세요.</p>
        <% } else if ("NumberFormatException".equals(errorType)) { %>
            <p>입력값이 올바르지 않습니다. 숫자를 정확히 입력해주세요.</p>
        <% } else { %>
            <p>예상치 못한 오류가 발생했습니다.</p>
        <% } %>
        
        <div class="error-details">
            <p><strong>오류 유형:</strong> <%= errorType %></p>
            <% if (errorMessage != null) { %>
                <p><strong>상세 메시지:</strong> <%= errorMessage %></p>
            <% } %>
            <p><strong>발생 시간:</strong> <%= new java.util.Date() %></p>
        </div>
        
        <div class="error-actions">
            <button onclick="history.back()">이전 페이지로</button>
            <button onclick="location.href='/'">홈으로 가기</button>
        </div>
    </div>
    
    <%-- 오류 로깅 --%>
    <%
        System.err.println("JSP Error occurred at: " + request.getRequestURI());
        System.err.println("Error type: " + errorType);
        System.err.println("Error message: " + errorMessage);
        exception.printStackTrace();
    %>
</body>
</html>
```

#### 6. 캐싱 및 성능 최적화 패턴
```jsp
<%-- 정적 데이터 캐싱 --%>
<%!
    private static List<Category> categories = null;
    private static long lastCategoryUpdate = 0;
    private static final long CACHE_DURATION = 5 * 60 * 1000; // 5분
    
    public synchronized List<Category> getCategories() {
        long now = System.currentTimeMillis();
        if (categories == null || (now - lastCategoryUpdate) > CACHE_DURATION) {
            // 데이터베이스에서 카테고리 정보 로드
            CategoryService service = new CategoryService();
            categories = service.getAllCategories();
            lastCategoryUpdate = now;
        }
        return categories;
    }
%>

<%-- 조건부 컨텐츠 렌더링 --%>
<%
    String userAgent = request.getHeader("User-Agent");
    boolean isMobile = userAgent != null && userAgent.toLowerCase().contains("mobile");
%>

<% if (isMobile) { %>
    <jsp:include page="mobileLayout.jsp" />
<% } else { %>
    <jsp:include page="desktopLayout.jsp" />
<% } %>
```

이러한 실무 패턴들은 JSP의 세 가지 주요 태그 유형을 효과적으로 조합하여 실제 웹 애플리케이션에서 자주 사용되는 기능들을 구현하는 방법을 보여줍니다. 각 태그의 특성을 이해하고 적절한 상황에서 사용하면 유지보수하기 쉽고 성능이 좋은 JSP 애플리케이션을 개발할 수 있습니다.