---
layout: single
title:  "DOM"
category: tool
tag: [JavaSript, DOM]
---
# DOM(Document Object Model) 완벽 가이드

## DOM 개념

DOM(Document Object Model)은 웹 페이지의 HTML, XML 문서를 프로그래밍 언어에서 접근하고 조작할 수 있도록 하는 인터페이스입니다. 문서를 **트리 구조의 객체**로 표현하여 JavaScript 등의 언어로 동적으로 내용을 변경할 수 있게 합니다.

### 특징
- 웹 브라우저가 HTML 문서를 파싱하여 생성
- 계층적 트리 구조로 구성
- 각 HTML 요소가 객체(Node)가 됨
- 실시간으로 변경 가능한 Live 객체

## DOM 구조

```
document
├── html (Document Element)
    ├── head
    │   ├── title
    │   │   └── "페이지 제목" (Text Node)
    │   └── meta
    └── body
        ├── h1
        │   └── "제목" (Text Node)
        ├── div (class="container")
        │   ├── p
        │   │   └── "문단 내용" (Text Node)
        │   └── button (id="btn")
        │       └── "클릭" (Text Node)
        └── script
```

### 노드 타입
1. **Document Node**: 문서 전체 (document)
2. **Element Node**: HTML 태그 (`<div>`, `<p>` 등)
3. **Text Node**: 텍스트 내용
4. **Attribute Node**: 속성 (class, id 등)
5. **Comment Node**: 주석

## 주요 DOM 메서드

### 1. 요소 선택 메서드

#### `getElementById(id)`
```javascript
// HTML: <div id="myDiv">내용</div>
const element = document.getElementById('myDiv');
console.log(element); // <div id="myDiv">내용</div>
```

#### `getElementsByClassName(className)`
```javascript
// HTML: <div class="item">1</div><div class="item">2</div>
const elements = document.getElementsByClassName('item');
console.log(elements); // HTMLCollection [div.item, div.item]
console.log(elements[0]); // 첫 번째 요소
```

#### `getElementsByTagName(tagName)`
```javascript
// 모든 p 태그 선택
const paragraphs = document.getElementsByTagName('p');
for (let p of paragraphs) {
    console.log(p.textContent);
}
```

#### `querySelector(selector)` / `querySelectorAll(selector)`
```javascript
// CSS 선택자 사용 가능
const firstItem = document.querySelector('.item'); // 첫 번째만
const allItems = document.querySelectorAll('.item'); // 모든 요소
const specificElement = document.querySelector('#myDiv > p.highlight');

// NodeList 순회
allItems.forEach(item => {
    console.log(item.textContent);
});
```

### 2. 요소 생성 및 조작 메서드

#### `createElement(tagName)`
```javascript
// 새 요소 생성
const newDiv = document.createElement('div');
newDiv.textContent = '새로운 Div';
newDiv.className = 'new-item';
newDiv.id = 'dynamicDiv';
```

#### `createTextNode(text)`
```javascript
const textNode = document.createTextNode('순수 텍스트');
const p = document.createElement('p');
p.appendChild(textNode);
```

#### `appendChild(node)` / `insertBefore(newNode, referenceNode)`
```javascript
// 요소 추가
const container = document.getElementById('container');
container.appendChild(newDiv); // 마지막에 추가

// 특정 위치에 삽입
const firstChild = container.firstElementChild;
container.insertBefore(newDiv, firstChild); // 첫 번째로 삽입
```

#### `removeChild(child)` / `remove()`
```javascript
// 자식 요소 제거
const parent = document.getElementById('parent');
const child = document.getElementById('child');
parent.removeChild(child);

// 직접 제거 (IE 미지원)
child.remove();
```

### 3. 속성 조작 메서드

#### `getAttribute(name)` / `setAttribute(name, value)`
```javascript
const img = document.querySelector('img');

// 속성 읽기
const src = img.getAttribute('src');
const alt = img.getAttribute('alt');

// 속성 설정
img.setAttribute('src', 'new-image.jpg');
img.setAttribute('alt', '새로운 이미지');
img.setAttribute('data-category', 'nature');
```

#### `removeAttribute(name)` / `hasAttribute(name)`
```javascript
// 속성 제거
img.removeAttribute('alt');

// 속성 존재 확인
if (img.hasAttribute('data-category')) {
    console.log('카테고리 속성이 있습니다.');
}
```

### 4. 콘텐츠 조작

#### `textContent` vs `innerHTML` vs `innerText`
```javascript
const div = document.getElementById('content');

// HTML 태그를 문자열로 처리
div.textContent = '<strong>볼드</strong> 텍스트'; 
// 결과: <strong>볼드</strong> 텍스트

// HTML 태그를 실제 태그로 처리
div.innerHTML = '<strong>볼드</strong> 텍스트';
// 결과: 볼드 텍스트 (strong 태그 적용)

// 보이는 텍스트만 (CSS display:none 제외)
div.innerText = '보이는 텍스트만';
```

### 5. 스타일 조작

#### `style` 속성
```javascript
const element = document.getElementById('myElement');

// 개별 스타일 설정
element.style.color = 'red';
element.style.fontSize = '16px';
element.style.backgroundColor = '#f0f0f0';

// 여러 스타일 한번에
element.style.cssText = 'color: blue; font-size: 18px; margin: 10px;';
```

#### `classList` 메서드
```javascript
const element = document.querySelector('.item');

// 클래스 추가
element.classList.add('active');
element.classList.add('highlighted', 'important'); // 여러 개 추가

// 클래스 제거
element.classList.remove('old-class');

// 클래스 토글 (있으면 제거, 없으면 추가)
element.classList.toggle('visible');

// 클래스 존재 확인
if (element.classList.contains('active')) {
    console.log('활성 상태입니다.');
}
```

### 6. 이벤트 처리

#### `addEventListener(event, handler)` / `removeEventListener(event, handler)`
```javascript
const button = document.getElementById('myButton');

// 이벤트 리스너 추가
function handleClick(event) {
    console.log('버튼이 클릭되었습니다!');
    console.log('클릭된 요소:', event.target);
}

button.addEventListener('click', handleClick);

// 이벤트 리스너 제거
button.removeEventListener('click', handleClick);

// 익명 함수로 추가 (제거 불가)
button.addEventListener('click', function(e) {
    e.preventDefault(); // 기본 동작 방지
    e.stopPropagation(); // 이벤트 버블링 중지
});
```

### 7. 탐색 메서드

#### 부모/자식 탐색
```javascript
const element = document.getElementById('current');

// 부모 요소
const parent = element.parentElement;
const parentNode = element.parentNode;

// 자식 요소
const children = element.children; // HTMLCollection
const childNodes = element.childNodes; // NodeList (텍스트 노드 포함)
const firstChild = element.firstElementChild;
const lastChild = element.lastElementChild;
```

#### 형제 요소 탐색
```javascript
// 이전/다음 형제 요소
const prevSibling = element.previousElementSibling;
const nextSibling = element.nextElementSibling;
```

### 8. 실용적인 활용 예시

```javascript
// 동적 리스트 생성
function createTodoList(todos) {
    const ul = document.createElement('ul');
    ul.className = 'todo-list';
    
    todos.forEach(todo => {
        const li = document.createElement('li');
        li.className = todo.completed ? 'completed' : 'pending';
        
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = todo.completed;
        checkbox.addEventListener('change', function() {
            li.classList.toggle('completed');
        });
        
        const span = document.createElement('span');
        span.textContent = todo.text;
        
        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = '삭제';
        deleteBtn.addEventListener('click', function() {
            li.remove();
        });
        
        li.appendChild(checkbox);
        li.appendChild(span);
        li.appendChild(deleteBtn);
        ul.appendChild(li);
    });
    
    document.body.appendChild(ul);
}

// 사용 예시
const todos = [
    { text: '숙제하기', completed: false },
    { text: '운동하기', completed: true },
    { text: '독서하기', completed: false }
];

createTodoList(todos);
```

## DOM 조작 시 주의사항

### 1. 성능 최적화
```javascript
// 나쁜 예: DOM을 여러 번 조작
for (let i = 0; i < 100; i++) {
    const div = document.createElement('div');
    div.textContent = `Item ${i}`;
    document.body.appendChild(div); // 매번 리플로우 발생
}

// 좋은 예: DocumentFragment 사용
const fragment = document.createDocumentFragment();
for (let i = 0; i < 100; i++) {
    const div = document.createElement('div');
    div.textContent = `Item ${i}`;
    fragment.appendChild(div);
}
document.body.appendChild(fragment); // 한 번만 리플로우
```

### 2. 이벤트 위임
```javascript
// 나쁜 예: 각 요소에 이벤트 리스너 추가
document.querySelectorAll('.item').forEach(item => {
    item.addEventListener('click', handleClick);
});

// 좋은 예: 부모에 이벤트 위임
document.getElementById('container').addEventListener('click', function(e) {
    if (e.target.classList.contains('item')) {
        handleClick(e);
    }
});
```

### 3. 메모리 누수 방지
```javascript
// 이벤트 리스너 정리
function cleanup() {
    const element = document.getElementById('myElement');
    if (element) {
        element.removeEventListener('click', handleClick);
    }
}
```

DOM은 웹 개발에서 매우 중요한 개념이므로, 이러한 메서드들을 잘 이해하고 활용하면 동적이고 인터랙티브한 웹 페이지를 만들 수 있습니다.